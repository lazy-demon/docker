import{a as ae}from"./chunk-UHYTPFRV.js";import{l as ne,m as C,n as oe,o as ie,p as re}from"./chunk-DSU3GC6G.js";import{$a as Q,$b as w,Aa as K,F as N,G as B,I as H,L as y,La as c,M as G,Ma as S,P as V,Pa as J,Q as W,Qa as _,ba as g,ca as x,cb as O,d as me,e as fe,eb as Y,fb as Z,fc as ee,gc as h,hc as te,j as q,ka as z,ma as U,oa as X,ra as l,sa as s,ta as M,xa as $,za as v}from"./chunk-DUQ77XVI.js";var se=me((A,D)=>{"use strict";(function(r,e){typeof define=="function"&&define.amd?define([],e):typeof A<"u"?e():(e(),r.FileSaver={})})(A,function(){"use strict";function r(o,i){return typeof i>"u"?i={autoBom:!1}:typeof i!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}function e(o,i,f){var a=new XMLHttpRequest;a.open("GET",o),a.responseType="blob",a.onload=function(){u(a.response,i,f)},a.onerror=function(){console.error("could not download file")},a.send()}function m(o){var i=new XMLHttpRequest;i.open("HEAD",o,!1);try{i.send()}catch{}return 200<=i.status&&299>=i.status}function t(o){try{o.dispatchEvent(new MouseEvent("click"))}catch{var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),o.dispatchEvent(i)}}var n=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,d=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=n.saveAs||(typeof window!="object"||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!d?function(o,i,f){var a=n.URL||n.webkitURL,p=document.createElement("a");i=i||o.name||"download",p.download=i,p.rel="noopener",typeof o=="string"?(p.href=o,p.origin===location.origin?t(p):m(p.href)?e(o,i,f):t(p,p.target="_blank")):(p.href=a.createObjectURL(o),setTimeout(function(){a.revokeObjectURL(p.href)},4e4),setTimeout(function(){t(p)},0))}:"msSaveOrOpenBlob"in navigator?function(o,i,f){if(i=i||o.name||"download",typeof o!="string")navigator.msSaveOrOpenBlob(r(o,f),i);else if(m(o))e(o,i,f);else{var a=document.createElement("a");a.href=o,a.target="_blank",setTimeout(function(){t(a)})}}:function(o,i,f,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),typeof o=="string")return e(o,i,f);var p=o.type==="application/octet-stream",pe=/constructor/i.test(n.HTMLElement)||n.safari,L=/CriOS\/[\d]+/.test(navigator.userAgent);if((L||p&&pe||d)&&typeof FileReader<"u"){var R=new FileReader;R.onloadend=function(){var F=R.result;F=L?F:F.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=F:location=F,a=null},R.readAsDataURL(o)}else{var T=n.URL||n.webkitURL,k=T.createObjectURL(o);a?a.location=k:location.href=k,a=null,setTimeout(function(){T.revokeObjectURL(k)},4e4)}});n.saveAs=u.saveAs=u,typeof D<"u"&&(D.exports=u)})});var E=class{constructor(e,m,t){this.name=e,this.id=m,this.platform=t}getName(){return this.name}getId(){return this.id}getPlatform(){return this.platform}};var b=(()=>{let e=class e{constructor(t){this.apiRequest=t,this.filesChanged=new q,this.getFiles()}getFiles(){this.apiRequest.sendGetRequest(w.FILES).subscribe(t=>{this.files=t.map(n=>new E(n.name,n.id,n.platform)),this.filesChanged.next(this.files.slice())})}download(t){console.log("download2"),this.apiRequest.sendGetRequest(w.FILES+"/"+t).subscribe(n=>{console.log(n),console.log("uuid: "+t)})}postFile(t){this.apiRequest.sendPostRequest(w.FILES+"/save",t).subscribe(n=>{this.getFiles()})}deleteFile(t){this.apiRequest.sendDeleteRequest(w.FILES+"/delete/",t.getId()).subscribe(n=>{this.getFiles()})}};e.\u0275fac=function(n){return new(n||e)(H(h))},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var I=(()=>{let e=class e{constructor(t){this.fileService=t,this.selectedFile=null}onFileSelected(t){this.selectedFile=t.target.files[0]}adjustInputWidth(t){t.style.width=t.value.length+1+"ch"}onUpload(){if(this.selectedFile){let t=new FormData;t.append("file",this.selectedFile),this.fileService.postFile(t)}}};e.\u0275fac=function(n){return new(n||e)(x(b))},e.\u0275cmp=y({type:e,selectors:[["file-upload"]],standalone:!0,features:[_],decls:4,vars:2,consts:[["oninput","adjustInputWidth(this)",1,"upload",3,"click"],["aria-label","Upload","type","file",3,"change"]],template:function(n,d){n&1&&(l(0,"div")(1,"button",0),v("click",function(){return d.onUpload()}),c(2," Uploaden "),s(),l(3,"input",1),v("change",function(o){return d.onFileSelected(o)}),s()()),n&2&&(g(),X("button-selected",d.selectedFile))},dependencies:[C],styles:[".upload[_ngcontent-%COMP%]{background-color:gray;border-radius:5px;border-color:gray;color:#fff;float:right;justify-content:flex-end;padding:5px;margin-bottom:5px;margin-left:10px}input[type=file][_ngcontent-%COMP%]{margin-right:1em;background-color:#975c8d;border-radius:.3em;border-color:#975c8d;color:#fff;float:right;justify-content:flex-end;padding:.4em;text-decoration:none;cursor:pointer;width:400px}.button-selected[_ngcontent-%COMP%]{background-color:#975c8d;color:#fff}"]});let r=e;return r})();var ce=fe(se());var j=(()=>{let e=class e{constructor(t){this.api=t}downloadFile(){this.api.sendGetFileRequest(w.FILES+"/"+this.UUID).subscribe(t=>{let n=new Blob([new Uint8Array(t)],{type:"application/octet-stream"});ce.default.saveAs(n,this.name),new FileReader().readAsText(n)})}};e.\u0275fac=function(n){return new(n||e)(x(h))},e.\u0275cmp=y({type:e,selectors:[["file-download"]],inputs:{UUID:"UUID",name:"name"},standalone:!0,features:[J([Y,b,h]),_],decls:2,vars:0,consts:[[1,"btn","btn-primary",2,"margin-left","10px",3,"click"]],template:function(n,d){n&1&&(l(0,"button",0),v("click",function(){return d.downloadFile()}),c(1,` Download
`),s())},dependencies:[O,C]});let r=e;return r})();function be(r,e){if(r&1){let m=$();l(0,"tr",8)(1,"td"),c(2),s(),l(3,"td"),c(4),s(),l(5,"td"),c(6),s(),l(7,"td",9)(8,"button",10),v("click",function(){let d=V(m).$implicit,u=K();return W(u.deleteFile(d))}),c(9," Verwijderen"),M(10,"mat-icon",11),s(),M(11,"file-download",12),s()()}if(r&2){let m=e.$implicit;g(2),S(m.getName()),g(2),S(m.getPlatform()),g(2),S(m.getId()),g(5),U("UUID",m.getId())("name",m.getName())}}var de=(()=>{let e=class e{constructor(t){this.fileService=t}ngOnInit(){this.fileSubscribtion=this.fileService.filesChanged.subscribe(t=>{this.files=t}),this.fileService.getFiles()}ngOnDestroy(){this.fileSubscribtion.unsubscribe()}deleteFile(t){this.fileService.deleteFile(t)}download(t){this.fileService.download(t)}};e.\u0275fac=function(n){return new(n||e)(x(b))},e.\u0275cmp=y({type:e,selectors:[["files"]],decls:21,vars:1,consts:[[1,"container",2,"margin-left","150px"],["id","mapping",1,"center-block"],["id","table"],["id","mapping-table"],[1,"table","table-responsive","table-bordered","table-striped","table-hover"],[1,"table-header"],["scope","col",2,"width","20%"],["class","grid-item",4,"ngFor","ngForOf"],[1,"grid-item"],[2,"display","flex","justify-content","space-evenly","height","100%","padding-top","1em","padding-bottom","1em"],[1,"btn","btn-danger",3,"click"],["aria-hidden","false","aria-label","Verwijderen","fontIcon","delete",1,"iconDelete"],[3,"UUID","name"]],template:function(n,d){n&1&&(M(0,"nav-bar"),l(1,"div",0)(2,"div",1)(3,"h1"),c(4,"Bestandsbeheer"),s(),l(5,"div",2)(6,"div",3),M(7,"file-upload"),l(8,"table",4)(9,"thead")(10,"tr",5)(11,"th",6),c(12,"Naam"),s(),l(13,"th",6),c(14,"Platform"),s(),l(15,"th",6),c(16,"ID"),s(),l(17,"th",6),c(18,"Acties"),s()()(),l(19,"tbody"),z(20,be,12,5,"tr",7),s()()()()()()),n&2&&(g(20),U("ngForOf",d.files))},dependencies:[Q,ne,I,j,oe],styles:["#table[_ngcontent-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}.paginatior[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center}nav[_ngcontent-%COMP%]{position:relative;justify-content:center;left:4vw}*[_ngcontent-%COMP%]{cursor:pointer}tr[_ngcontent-%COMP%]{min-height:38px;height:38px}th[_ngcontent-%COMP%]{min-height:38px}.table[_ngcontent-%COMP%]{border-collapse:unset}.table-striped[_ngcontent-%COMP%]{background-color:#8e606f40}.table-header[_ngcontent-%COMP%]{background-color:#232f49;color:#fff;font-size:120%;font-weight:700}.table-subheader[_ngcontent-%COMP%]{background-color:#4c5d84a1;color:#fff;font-size:110%}#mapping[_ngcontent-%COMP%]{width:80%}#mapping-table[_ngcontent-%COMP%]{min-width:65vw}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%], .table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   th[_ngcontent-%COMP%]{background-color:#8e606f66}mat-icon[_ngcontent-%COMP%]{color:#9d9d9d}.rows[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.editbtn[_ngcontent-%COMP%]{background-color:#975c8d;border-radius:5px;border-color:#975c8d;color:#fff;float:right;justify-content:flex-end;padding:5px;margin-bottom:5px}.lastEdited[_ngcontent-%COMP%]{position:absolute;margin-top:10px;margin-left:3px}.opslbutton[_ngcontent-%COMP%]{background-color:#975c8d;border-radius:5px;border-color:#975c8d;color:#fff;padding:5px}.iconDelete[_ngcontent-%COMP%]{width:20px;height:20px;vertical-align:middle;text-align:center;line-height:20px;color:#fff}"]});let r=e;return r})();var ze=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=G({type:e}),e.\u0275inj=B({providers:[h,b,te],imports:[O,Z,C,I,j,ie,ee.forChild([{path:"",canActivate:[re,ae],component:de}])]});let r=e;return r})();export{ze as FilesModule};
