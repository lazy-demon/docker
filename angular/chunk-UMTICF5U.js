import{j as pe,n as de,o as me,p as ge}from"./chunk-LCTUPZZG.js";import{$a as Q,$b as ce,Aa as u,Ea as G,F as y,G as j,I as V,Jb as ne,L as h,La as c,Lb as oe,M as U,Ma as E,Na as P,Nb as ie,Oa as q,P as v,Pa as Z,Q as b,R as L,S as B,Ua as J,Va as K,Yb as ae,ab as W,ba as l,bb as X,ca as _,cb as Y,db as ee,dc as se,eb as te,fa as A,fb as re,fc as le,ka as w,ma as g,na as H,oa as $,ra as a,sa as i,ta as f,xa as F,za as d}from"./chunk-IPN6YRSE.js";var k=class{constructor(e,s,r,n){this._id=e,this._platformName=s,this._riskScore=r,this._dateEdited=n}get id(){return this._id}get name(){return this._platformName}get risk(){return this._riskScore}get lastUpdated(){return this._dateEdited}};var x=(()=>{let e=class e{constructor(){this._searchText="",this._platforms=[],this._totalFilteredRecords=0,this.filteredPlatforms=[],this._dateFilter=null,this.filteredPlatforms=this._platforms}get searchText(){return this._searchText}onSearch(r,n){this.applyFilters(r,n)}applyFilters(r,n){let o=[...this._platforms];this._searchText&&(o=o.filter(R=>R.name.toLowerCase().includes(this._searchText.toLowerCase()))),this._dateFilter&&o.sort((R,ve)=>{let z=new Date(R.lastUpdated),N=new Date(ve.lastUpdated);return this._dateFilter==="oldest"?z.getTime()-N.getTime():N.getTime()-z.getTime()});let m=(r-1)*n,O=m+n;this.filteredPlatforms=o.slice(m,O),this._totalFilteredRecords=o.length}setPlatforms(r){this._platforms=r}set searchText(r){this._searchText=r}get totalFilteredRecords(){return this._totalFilteredRecords}setDateFilter(r){this._dateFilter=r}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var S,be=new Uint8Array(16);function T(){if(!S&&(S=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!S))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return S(be)}var p=[];for(let t=0;t<256;++t)p.push((t+256).toString(16).slice(1));function ue(t,e=0){return p[t[e+0]]+p[t[e+1]]+p[t[e+2]]+p[t[e+3]]+"-"+p[t[e+4]]+p[t[e+5]]+"-"+p[t[e+6]]+p[t[e+7]]+"-"+p[t[e+8]]+p[t[e+9]]+"-"+p[t[e+10]]+p[t[e+11]]+p[t[e+12]]+p[t[e+13]]+p[t[e+14]]+p[t[e+15]]}var Ce=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),D={randomUUID:Ce};function ye(t,e,s){if(D.randomUUID&&!e&&!t)return D.randomUUID();t=t||{};let r=t.random||(t.rng||T)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){s=s||0;for(let n=0;n<16;++n)e[s+n]=r[n];return e}return ue(r)}var I=ye;var M=(()=>{let e=class e{constructor(r){this.http=r,this.apiUrl=ce.RECORD}headerSetup(){let r=localStorage.getItem("jwtToken"),n=new ee({accept:"application/json; utf-8","content-type":"application/json"});return r&&(n=n.append("Authorization",`Bearer ${r}`)),n}get record(){let r=this.headerSetup();return this.http.get(this.apiUrl,{headers:r})}addRecord(r){let n=this.headerSetup(),o={id:I().toString(),platformName:r.platformName,riskScore:r.riskScore,dateEdited:new Date().toISOString().slice(0,10)};return this.http.post(this.apiUrl,o,{headers:n})}};e.\u0275fac=function(n){return new(n||e)(V(te))},e.\u0275prov=y({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var he=(()=>{let e=class e{constructor(){this.currentPlatformForEditing=null}startEditing(r){this.currentPlatformForEditing=r}getColor(r){switch(r){case"groen":return"green";case"rood":return"red";case"oranje":return"orange";default:return"#ffffff"}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=h({type:e,selectors:[["app-report-entry"]],inputs:{platform:"platform"},decls:12,vars:5,consts:[[1,"report-entry"],[1,"entry-name"],[1,"entry-risk"],[1,"risk-score"],[1,"risk-badge"],[1,"entry-date"],[1,"adjust-report-button"]],template:function(n,o){n&1&&(a(0,"div",0)(1,"div",1),c(2),i(),a(3,"div",2)(4,"div",3),f(5,"div",4),i(),a(6,"div"),c(7),i()(),a(8,"div",5),c(9),J(10,"date"),i(),f(11,"div",6),i()),n&2&&(l(2),P(" ",o.platform.name,""),l(5),E(o.platform.risk),l(2),E(K(10,3,o.platform.lastUpdated)))},dependencies:[X],styles:[".report-entry[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px;display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:1rem;padding:.5rem;border-bottom:.1px solid #eaeaea;background-color:#fff;box-shadow:0 4px 6px #0000001a;animation:_ngcontent-%COMP%_fadeIn .4s ease-in-out forwards}.report-entry[_ngcontent-%COMP%]:nth-child(odd){background-color:#f7f7f7}.report-entry[_ngcontent-%COMP%]:hover{transition:transform .3s ease-in-out;cursor:pointer;opacity:.7!important}.adjust-report-button[_ngcontent-%COMP%], .entry-name[_ngcontent-%COMP%], .entry-risk[_ngcontent-%COMP%], .entry-date[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem;font-family:Raleway,sans-serif;font-size:16px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.risk-badge[_ngcontent-%COMP%]{height:15px;width:15px;border-radius:50%;display:inline-block;margin-right:8px}p[_ngcontent-%COMP%]{font-size:14px}.risk-score[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]});let t=e;return t})();var _e=(()=>{let e=class e{constructor(r){this.searchService=r,this.filterChanged=new A,this.checkboxStates={},this.toggleColorDropdown=!1,this.toggleDateDropdown=!1}applyDateFilter(r){this.searchService.setDateFilter(r),this.filterChanged.emit()}};e.\u0275fac=function(n){return new(n||e)(_(x))},e.\u0275cmp=h({type:e,selectors:[["app-filter"]],inputs:{checkboxStates:"checkboxStates"},outputs:{filterChanged:"filterChanged"},decls:11,vars:2,consts:[[1,"filter-container"],[1,"dropdown"],[1,"dropdown-btn",3,"click"],[1,"dropdown-content"],[1,"radio-option"],["type","radio","name","dateFilter","value","oldest",3,"change"],["type","radio","name","dateFilter","value","newest",3,"change"]],template:function(n,o){n&1&&(a(0,"div",0)(1,"div",1)(2,"button",2),d("click",function(){return o.toggleDateDropdown=!o.toggleDateDropdown}),c(3,"Datum Filter"),i(),a(4,"div",3)(5,"label",4)(6,"input",5),d("change",function(){return o.applyDateFilter("oldest")}),i(),c(7," Datum oplopend "),i(),a(8,"label",4)(9,"input",6),d("change",function(){return o.applyDateFilter("newest")}),i(),c(10," Datum aflopend "),i()()()()),n&2&&(l(4),$("show",o.toggleDateDropdown))},styles:["app-filter-container .filter-container{margin-top:10px}  app-filter-container .radio-option{margin:0 10px;font-size:14px;font-weight:400}  app-filter-container .radio-option input[type=radio]{margin-right:5px}.dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.dropdown-btn[_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;cursor:pointer}.dropdown-content[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#f9f9f9;min-width:160px;box-shadow:0 8px 16px #0003;padding:12px 16px;z-index:1}.show[_ngcontent-%COMP%]{display:block}"]});let t=e;return t})();function Me(t,e){if(t&1){let s=F();a(0,"app-filter",24),d("filterChanged",function(){v(s);let n=u();return b(n.onFilterChanged())}),i()}if(t&2){let s=u();g("checkboxStates",s.checkboxStates)}}function Oe(t,e){if(t&1&&f(0,"app-report-entry",25),t&2){let s=e.$implicit;G("routerLink","/editor/",s.name,""),g("platform",s)}}function Re(t,e){if(t&1){let s=F();a(0,"div",26)(1,"div",27)(2,"span",28),d("click",function(){v(s);let n=u();return b(n.toggleNewRecord=!1)}),c(3,"\xD7"),i(),a(4,"p"),c(5,"Platform toevoegen"),i(),a(6,"input",29),d("ngModelChange",function(n){v(s);let o=u();return b(o.newReport=n)}),i(),a(7,"button",30),d("click",function(){v(s);let n=u();return b(n.createRecord())}),c(8," Voeg platform toe "),i()()()}if(t&2){let s=u();l(6),g("ngModel",s.newReport)}}var xe=(()=>{let e=class e{constructor(r,n,o){this.searchService=r,this.recordService=n,this.navBarStateService=o,this.toggleNewRecord=!1,this.newReport="",this.toggleFilterView=!1,this.totalRecords=0,this.riskScore=0,this.currentPage=1,this.itemsPerPage=9,this.checkboxStates={},this.isCollapsed=!1,this.totalRecords=this.searchService._platforms.length,this.navBarStateService.isCollapsed$.subscribe(m=>{this.isCollapsed=m})}ngOnInit(){this.loadData()}loadData(){this.recordService.record.subscribe(r=>{let n=r.map(o=>new k(o.id,o.platformName,o.riskScore,o.dateEdited));this.searchService.setPlatforms(n),this.totalRecords=n.length,this.onSearch()},r=>{console.error("Error fetching records:",r)})}createRecord(){if(this.newReport&&!this.searchService._platforms.find(n=>n.name.toLowerCase()===this.newReport.toLowerCase())){let n={platformName:this.newReport,riskScore:this.riskScore};this.recordService.addRecord(n).subscribe({next:o=>{this.loadData()},error:o=>{console.error("There was an error adding the record",o)}})}}toggleFilter(){this.toggleFilterView=!this.toggleFilterView}get totalFilteredRecords(){return this.searchService.totalFilteredRecords}goToNextPage(){this.currentPage*this.itemsPerPage<this.totalFilteredRecords&&(this.currentPage++,this.onSearch())}goToPreviousPage(){this.currentPage>1&&(this.currentPage--,this.onSearch())}onSearch(){this.searchService.onSearch(this.currentPage,this.itemsPerPage)}onFilterChanged(){this.searchService.applyFilters(this.currentPage,this.itemsPerPage)}};e.\u0275fac=function(n){return new(n||e)(_(x),_(M),_(pe))},e.\u0275cmp=h({type:e,selectors:[["app-rapportage-overzicht"]],features:[Z([x,M])],decls:35,vars:11,consts:[[1,"content"],[1,"flex-container"],[1,"searchbar-container"],[1,"filter-section"],["type","text","placeholder","Zoeken...",1,"filter-input",3,"ngModel","ngModelChange","input"],[1,"search-icon"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-search"],["d","M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"],[1,"toggleFilter",3,"click"],[1,"arrow-down"],[3,"checkboxStates","filterChanged",4,"ngIf"],[1,"control-bar"],[1,"control-btn","create-btn",3,"click"],[1,"report-list"],[1,"report-entry-header"],[1,"entry-name-header"],[1,"entry-risk-header"],[1,"entry-date-header"],[3,"platform","routerLink",4,"ngFor","ngForOf"],["class","popup",4,"ngIf"],[1,"pagination-controls"],[1,"previous-button",3,"disabled","click"],[2,"font-size","12px"],[1,"next-button",3,"disabled","click"],[3,"checkboxStates","filterChanged"],[3,"platform","routerLink"],[1,"popup"],[1,"popup-content"],[1,"close",3,"click"],["type","text","placeholder","Naam van platform",1,"dossier-input",3,"ngModel","ngModelChange"],[1,"dossier-button",3,"click"]],template:function(n,o){n&1&&(f(0,"nav-bar"),a(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"input",4),d("ngModelChange",function(O){return o.searchService.searchText=O})("input",function(){return o.onSearch()}),i(),a(6,"span",5),L(),a(7,"svg",6),f(8,"path",7),i()(),B(),a(9,"button",8),d("click",function(){return o.toggleFilter()}),c(10,"Meer filters \xA0"),f(11,"i",9),i()(),w(12,Me,1,1,"app-filter",10),i(),a(13,"p"),c(14),i(),a(15,"div",11)(16,"button",12),d("click",function(){return o.toggleNewRecord=!o.toggleNewRecord}),c(17," Nieuw Platform "),i()()(),a(18,"section",13)(19,"div",14)(20,"div",15),c(21,"Platform Naam"),i(),a(22,"div",16),c(23,"Risico Score"),i(),a(24,"div",17),c(25,"Datum Bijgewerkt"),i()(),w(26,Oe,1,2,"app-report-entry",18),i(),w(27,Re,9,1,"div",19),a(28,"div",20)(29,"button",21),d("click",function(){return o.goToPreviousPage()}),c(30,"Vorige"),i(),a(31,"span",22),c(32),i(),a(33,"button",23),d("click",function(){return o.goToNextPage()}),c(34," Volgende "),i()()()),n&2&&(l(),H("margin-left",o.isCollapsed?150:255,"px"),l(4),g("ngModel",o.searchService.searchText),l(7),g("ngIf",o.toggleFilterView),l(2),q("",o.totalFilteredRecords,"/",o.totalRecords,""),l(12),g("ngForOf",o.searchService.filteredPlatforms),l(),g("ngIf",o.toggleNewRecord),l(2),g("disabled",o.currentPage===1),l(3),P("Pagina ",o.currentPage,""),l(),g("disabled",o.currentPage*o.itemsPerPage>=o.totalRecords))},dependencies:[Q,W,ne,oe,ie,de,se,he,_e],styles:[".content[_ngcontent-%COMP%]{margin-left:200px;transition:margin-left .5s ease-in-out}.popup[_ngcontent-%COMP%]{position:fixed;z-index:100;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#0006;display:flex;align-items:center;justify-content:center}.popup-content[_ngcontent-%COMP%]{background-color:#fff;margin:auto;padding:20px;border:1px solid #ccc;width:25%;border-radius:15px;text-align:center;box-shadow:0 4px 6px #0000001a}.close[_ngcontent-%COMP%]{color:#aaa;float:right;font-size:28px;font-weight:700}.close[_ngcontent-%COMP%]:hover, .close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none;cursor:pointer}.dossier-input[_ngcontent-%COMP%]{width:80%;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid #ddd;border-radius:4px;box-sizing:border-box;font-size:14px!important}.flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem}.control-bar[_ngcontent-%COMP%]{display:flex;padding:1rem}.control-bar[_ngcontent-%COMP%]   .control-btn.create-btn[_ngcontent-%COMP%]{margin-left:2px!important}.control-bar[_ngcontent-%COMP%]   .control-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid transparent;border-radius:1rem;cursor:pointer;background-color:#fff;transition:background-color .3s ease;width:120%}.control-bar[_ngcontent-%COMP%]   .control-btn[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.control-bar[_ngcontent-%COMP%]   .control-btn.create-btn[_ngcontent-%COMP%]{background-color:#975c8d;color:#fff;border-color:#975c8d}.control-bar[_ngcontent-%COMP%]   .control-btn.create-btn[_ngcontent-%COMP%]:hover{background-color:#77496f}.dossier-button[_ngcontent-%COMP%]{width:80%;background-color:#975c8d;color:#fff;padding:14px 20px;margin:8px 0;border:none;border-radius:4px;cursor:pointer}.dossier-button[_ngcontent-%COMP%]:hover{background-color:#464646}.report-entry-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:1rem;padding:.5rem;margin-left:10px;margin-right:10px;background-color:#f2f2f2;font-weight:700}.entry-name-header[_ngcontent-%COMP%], .entry-risk-header[_ngcontent-%COMP%], .entry-date-header[_ngcontent-%COMP%]{font-weight:700;font-size:16px}.toggleFilter[_ngcontent-%COMP%]{border:none;background-color:inherit;padding:14px 28px;font-size:16px;cursor:pointer;display:inline-block;margin-left:10px}.toggleFilter[_ngcontent-%COMP%]:hover{background:#eee}.arrow-down[_ngcontent-%COMP%]{border:solid black;border-width:0 3px 3px 0;display:inline-block;padding:3px;transform:rotate(45deg);-webkit-transform:rotate(45deg);height:2px}.filter-section[_ngcontent-%COMP%]{position:relative;justify-content:center;padding:1rem}.search-icon[_ngcontent-%COMP%]{position:relative;margin-left:-23px}.filter-input[_ngcontent-%COMP%]{font-family:Raleway;width:100%;max-width:500px;padding:.5rem 1rem;font-size:16px;border:1px solid #e0e0e0;border-radius:.25rem;background-color:#f2f2f2}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:1rem;padding:.5rem;margin:10px auto;background-color:#f4f4f4;border-radius:8px;box-shadow:0 2px 4px #0000001a;font-weight:700}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:5px;background-color:#975c8d;color:#fff;cursor:pointer;transition:background-color .3s;font-family:Raleway,Arial;font-size:16px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#975c8d}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:default}.pagination-controls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem}body[_ngcontent-%COMP%]{font-size:14px}"]});let t=e;return t})();var ut=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=U({type:e}),e.\u0275inj=j({imports:[Y,re,ae,me,le.forChild([{path:"",canActivate:[ge],component:xe}])]});let t=e;return t})();export{ut as RapportageOverzichtModule};
